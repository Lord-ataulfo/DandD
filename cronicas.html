<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crónicas de la Aventura - Aventura Épica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ephesis&family=Noto+Sans+Gothic:wght@400;700&display=swap"
        rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'ephesis': ['Ephesis', 'cursive'],
                        'noto-sans-gothic': ['"Noto Sans Gothic"', 'sans-serif'],
                    },
                    colors: { 'custom-card-title': '#791B4D', },
                    transitionDelay: { '500': '500ms' }
                }
            },
            plugins: [
                function ({ addUtilities }) {
                    const newUtilities = {
                        '.text-stroke-black-1': { '-webkit-text-stroke': '1px black', 'text-stroke': '1px black', },
                    }
                    addUtilities(newUtilities, ['responsive', 'hover'])
                }
            ]
        }
    </script>
    <style>
        .modal {
            transition: opacity 0.25s ease;
        }

        .modal-active {
            overflow-x: hidden;
            overflow-y: auto;
        }

        .modal-content {
            max-height: 90vh;
        }
    </style>
</head>

<body class="bg-gray-100">

    <header id="header" class="bg-black text-white font-bold text-xl sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div
                class="w-16 h-16 md:w-20 md:h-20 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden">
                <img src="img/logo.jpeg" alt="Logotipo" class="w-full h-full object-cover">
            </div>
            <nav class="hidden md:flex items-center">
                <ul class="flex space-x-6">
                    <li><a href="index.html" class="hover:text-gray-400 transition-colors">Home</a></li>
                    <li class="relative group">
                        <button type="button" class="hover:text-gray-400 transition-colors">Aventureros</button>
                        <ul
                            class="dropdown-menu absolute left-0 mt-2 w-48 bg-black text-white p-2 rounded shadow-lg z-20">
                            <li><a href="romulo.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Rómulo</a></li>
                            <li><a href="rhananhta.html"
                                    class="block px-4 py-2 hover:bg-gray-700 rounded">Rhaan’Anhta</a></li>
                            <li><a href="puhleedo.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Puh lee do</a>
                            </li>
                            <li><a href="hengeyokay.html"
                                    class="block px-4 py-2 hover:bg-gray-700 rounded">Hengeyokay</a></li>
                            <li><a href="erick.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Erick</a></li>
                            <li><a href="eldora.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Eldora
                                    Gritaestrella</a></li>
                        </ul>
                    </li>
                    <li><a href="masterkevin.html" class="hover:text-gray-400 transition-colors">Master Kevin</a></li>
                    <li><a href="cronicas.html" class="hover:text-gray-400 transition-colors">Crónicas</a></li>
                </ul>
            </nav>
            <div class="md:hidden">
                <button id="hamburger-menu" class="text-white focus:outline-none">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-black">
            <ul class="flex flex-col items-center py-4 space-y-4">
                <li><a href="index.html" class="hover:text-gray-400 transition-colors">Home</a></li>
                <li class="text-center">
                    <span class="font-semibold mb-2 block cursor-pointer" onclick="toggleMobileSubmenu()">Aventureros
                        ▼</span>
                    <ul id="mobile-submenu-aventureros" class="space-y-2 hidden mt-2">
                        <li><a href="romulo.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Rómulo</a></li>
                        <li><a href="rhananhta.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Rhaan’Anhta</a>
                        </li>
                        <li><a href="puhleedo.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Puh lee do</a>
                        </li>
                        <li><a href="hengeyokay.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Hengeyokay</a>
                        </li>
                        <li><a href="erick.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Erick</a></li>
                        <li><a href="eldora.html" class="block px-4 py-2 hover:bg-gray-700 rounded">Eldora
                                Gritaestrella</a></li>
                    </ul>
                </li>
                <li><a href="masterkevin.html" class="hover:text-gray-400 transition-colors">Master Kevin</a></li>
                <li><a href="cronicas.html" class="hover:text-gray-400 transition-colors">Crónicas</a></li>
            </ul>
        </div>
    </header>

    <main class="container mx-auto py-12 px-4">
        <div class="flex justify-between items-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800">Crónicas de la Aventura</h1>
            <button id="addCronicaBtn"
                class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded shadow-lg transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1 -mt-0.5" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                        clip-rule="evenodd" />
                </svg>
                Nueva Crónica
            </button>
        </div>
        <div id="cronicasContainer" class="space-y-8">
            <p id="noCronicasMsg" class="text-gray-500 text-center py-10 text-lg">Aún no hay crónicas guardadas. ¡Añade
                la primera!</p>
        </div>
    </main>

    <div id="cronicaModal" class="modal fixed w-full h-full top-0 left-0 flex items-center justify-center hidden z-50">
        <div class="modal-overlay absolute w-full h-full bg-gray-900 opacity-50"></div>
        <div class="modal-container bg-white w-11/12 md:max-w-2xl mx-auto rounded shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <div class="flex justify-between items-center pb-3">
                    <p id="modalTitle" class="text-2xl font-bold font-ephesis text-custom-card-title">Añadir Nueva
                        Crónica</p>
                    <button id="closeModalBtn" class="modal-close cursor-pointer z-50 text-2xl">×</button>
                </div>
                <form id="cronicaForm">
                    <input type="hidden" id="cronicaId" value="">
                    <div class="mb-4">
                        <label for="cronicaTitleInput" class="block text-sm font-medium text-gray-700 mb-1">Título de la
                            Crónica:</label>
                        <input type="text" id="cronicaTitleInput" name="cronicaTitleInput"
                            class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md p-2"
                            placeholder="Ej: El Encuentro en el Bosque Tenebroso">
                    </div>
                    <div>
                        <label for="cronicaText" class="block text-sm font-medium text-gray-700 mb-1">Contenido de la
                            Crónica:</label>
                        <textarea id="cronicaText" name="cronicaText" rows="10"
                            class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md p-2 h-64 resize-y"
                            placeholder="Escribe tu crónica aquí..."></textarea>
                    </div>
                    <div class="mt-6 flex justify-end space-x-3">
                        <button type="button" id="cancelModalBtn"
                            class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition-colors">Cerrar</button>
                        <button type="submit" id="saveCronicaBtn"
                            class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition-colors">Guardar
                            Crónica</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer id="footer"
        class="bg-gray-900 text-red-500 text-lg text-center min-h-[90px] flex items-center justify-center mt-12">
        <p>© derechos reservados Unit00 2025</p>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // --- LÓGICA DE CRÓNICAS ---
        const addCronicaBtn = document.getElementById('addCronicaBtn');
        const cronicaModal = document.getElementById('cronicaModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const cancelModalBtn = document.getElementById('cancelModalBtn');
        const cronicaForm = document.getElementById('cronicaForm');
        const cronicaTitleInput = document.getElementById('cronicaTitleInput');
        const cronicaText = document.getElementById('cronicaText');
        const cronicaIdInput = document.getElementById('cronicaId');
        const modalTitle = document.getElementById('modalTitle');
        const cronicasContainer = document.getElementById('cronicasContainer');
        const noCronicasMsg = document.getElementById('noCronicasMsg');
        const STORAGE_KEY = 'aventuraCronicas';

        function openModal(id = null, title = '', text = '') {
            if (cronicaIdInput) cronicaIdInput.value = id || '';
            if (cronicaTitleInput) cronicaTitleInput.value = title;
            if (cronicaText) cronicaText.value = text;
            if (modalTitle) modalTitle.textContent = id ? 'Editar Crónica' : 'Añadir Nueva Crónica';
            if (cronicaModal) cronicaModal.classList.remove('hidden');
            document.body.classList.add('modal-active');
        }
        function closeModal() {
            if (cronicaModal) cronicaModal.classList.add('hidden');
            document.body.classList.remove('modal-active');
            if (cronicaForm) cronicaForm.reset();
            if (cronicaIdInput) cronicaIdInput.value = '';
        }
        function getCronicas() {
            const cronicas = localStorage.getItem(STORAGE_KEY);
            return cronicas ? JSON.parse(cronicas) : [];
        }
        function saveCronicas(cronicas) {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(cronicas));
            renderCronicas();
        }
        function renderCronicas() {
            const cronicas = getCronicas();
            if (!cronicasContainer) return;
            cronicasContainer.innerHTML = '';
            if (cronicas.length === 0) {
                if (noCronicasMsg) noCronicasMsg.classList.remove('hidden');
            } else {
                if (noCronicasMsg) noCronicasMsg.classList.add('hidden');
                cronicas.forEach((cronica) => {
                    const cronicaElement = document.createElement('article');
                    cronicaElement.className = 'bg-white p-6 rounded-lg shadow-xl relative';
                    cronicaElement.setAttribute('data-id', cronica.id);
                    const tituloCronica = document.createElement('h2');
                    tituloCronica.className = 'text-2xl font-semibold mb-3 font-ephesis text-custom-card-title';
                    tituloCronica.textContent = cronica.title || 'Crónica Sin Título';
                    const contenidoCronica = document.createElement('div');
                    contenidoCronica.className = 'text-gray-700 leading-relaxed text-justify prose-sm sm:prose lg:prose-lg max-w-none';
                    contenidoCronica.innerHTML = cronica.text.replace(/\n/g, '<br>'); // Sanitize if allowing HTML
                    const actionsDiv = document.createElement('div');
                    actionsDiv.className = 'absolute top-3 right-3 flex space-x-2';
                    const editBtn = document.createElement('button');
                    editBtn.className = "p-1 rounded hover:bg-gray-200 transition-colors";
                    editBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" viewBox="0 0 20 20" fill="currentColor"><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" /><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" /></svg>`;
                    editBtn.title = "Editar Crónica";
                    editBtn.onclick = () => openModal(cronica.id, cronica.title, cronica.text);
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = "p-1 rounded hover:bg-gray-200 transition-colors";
                    deleteBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-600" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>`;
                    deleteBtn.title = "Eliminar Crónica";
                    deleteBtn.onclick = () => deleteCronica(cronica.id);
                    actionsDiv.appendChild(editBtn);
                    actionsDiv.appendChild(deleteBtn);
                    cronicaElement.appendChild(tituloCronica);
                    cronicaElement.appendChild(contenidoCronica);
                    cronicaElement.appendChild(actionsDiv);
                    cronicasContainer.appendChild(cronicaElement);
                });
            }
        }
        function deleteCronica(id) {
            if (confirm('¿Estás seguro de que quieres eliminar esta crónica?')) {
                let cronicas = getCronicas();
                cronicas = cronicas.filter(c => c.id !== id);
                saveCronicas(cronicas);
            }
        }
        if (addCronicaBtn) addCronicaBtn.onclick = () => openModal();
        if (closeModalBtn) closeModalBtn.onclick = closeModal;
        if (cancelModalBtn) cancelModalBtn.onclick = closeModal;
        if (cronicaModal) {
            cronicaModal.addEventListener('click', (event) => {
                if (event.target === cronicaModal) closeModal();
            });
        }
        if (cronicaForm) {
            cronicaForm.onsubmit = (e) => {
                e.preventDefault();
                const title = cronicaTitleInput.value.trim();
                const text = cronicaText.value.trim();
                const id = cronicaIdInput.value;
                if (!title) { alert('El título no puede estar vacío.'); return; }
                if (!text) { alert('El contenido no puede estar vacío.'); return; }
                let cronicas = getCronicas();
                if (id) {
                    const index = cronicas.findIndex(c => c.id === id);
                    if (index > -1) {
                        cronicas[index].title = title;
                        cronicas[index].text = text;
                        cronicas[index].lastModified = new Date().toISOString();
                    }
                } else {
                    cronicas.push({
                        id: 'cronica-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                        title: title, text: text,
                        createdAt: new Date().toISOString(),
                        lastModified: new Date().toISOString()
                    });
                }
                saveCronicas(cronicas); closeModal();
            };
        }
        function loadCronicas() { renderCronicas(); }
        document.addEventListener('DOMContentLoaded', loadCronicas);
    </script>
</body>

</html>